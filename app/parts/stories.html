
<ol class="breadcrumb">
    <li><a href="/"><i class="fa fa-home"></i> Home</a></li>
    <li class="active"><i class="fa fa-book"></i> Stories</li>
</ol>
<div class="panel panel-info">
    <div class="panel-heading"><h3 class="panel-title">{{heading}}</h3></div>
    <div class="panel-body">
        <div class="table-responsive">
            <table class="table table-striped table-hover table-condensed table-fixedheader">
                <thead>
                    <tr>
                        <th ng-click="sortBy='title';sortReverse=!sortReverse">
                            Title
                            <span ng-show="sortBy == 'title' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortBy == 'title' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th ng-click="sortBy='words';sortReverse=!sortReverse">
                            Words
                            <span ng-show="sortBy == 'words' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortBy == 'words' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th ng-click="sortBy='genre';sortReverse=!sortReverse">
                            Primary genre
                            <span ng-show="sortBy == 'genre' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortBy == 'genre' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th ng-click="sortBy='status';sortReverse=!sortReverse">
                            Status
                            <span ng-show="sortBy == 'status' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortBy == 'status' && sortReverse" class="fa fa-caret-up"></span>
                        <th>Comments</th>
                    </tr>
                    <tr>
                        <td class="bg-info">
                            <span class="glyphicon glyphicon-search" ng-show="showFilters != true" ng-click="showFilters = true"></span>
                            <span class="glyphicon glyphicon-remove" ng-show="showFilters == true" ng-click="showFilters = false;search = []"></span>
                            <span ng-show="showFilters != true" ng-click="showFilters = true" class="small search">Search</span>
                            <span ng-show="showFilters == true" ng-click="showFilters = false;search = []" class="small search">Search</span>
                        </td>
                    </tr>
                    <tr ng-show="showFilters == true" class="bg-info">
                        <th><input class="form-control" ng-model="search.title" /></th>
                        <th><select class="form-control" ng-model="search.words" ng-options="words.name as words.id for words in storyLengthList"><option value="">---</option></select></th>
                        <th><select class="form-control" ng-model="search.genre" ng-options="genre.name as genre.id for genre in genreList"><option value="">---</option></select></th>
                        <th><select class="form-control" ng-model="search.status" ng-options="status.name as status.id for status in statusList"><option value="">---</option></select></th>
                        <th><input class="form-control" ng-model="search.comments" /></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-model="stories" ng-repeat="story in stories | orderBy:sortBy:sortReverse | StoryFilter:search" ng-class="subStatus(story.submitted, story.status)">
                        <td><p class="form-control-static"><a ng-href="/#/stories/{{story.storyId}}">{{story.title}}</a></p></td>
                        <td>
                            <input ng-model="story.words" ng-change="$parent.updateStory(story)" class="form-control" type="number" />
                        </td>
                        <td>
                            <select class="form-control" ng-change="$parent.updateStory(story)" ng-model="story.genre" ng-options="genre.name as genre.id for genre in genreList"></select>
                        </td>
                        <td>
                            <select class="form-control" ng-change="$parent.updateStory(story)" ng-model="story.status" ng-options="status.name as status.id for status in statusList"></select>
                        </td>
                        <td>
                            <input ng-change="$parent.updateStory(story)" ng-model="story.comments" class="form-control" type="text" />
                        </td>
                    </tr>
                    <tr ng-show="stories.length == 0"><td><p class="bg-info">No stories in this library yet.</p></td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="panel-footer">
        <button type="button" class="btn btn-primary btn-lg" ng-click="newStory()">
            New story
        </button>
        <div class="pull-right">
            <p class="small">
                <span class="label label-success">Green</span> - Currently at a market<br/>
                <span class="label label-danger">Red</span> - Needs to be submitted<br/>
                <span class="label label-default">Gray</span> - Not ready for submissions
            </p>
        </div>
    </div>
</div>